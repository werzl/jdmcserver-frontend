(this.webpackJsonpjdmcserver=this.webpackJsonpjdmcserver||[]).push([[0],{23:function(e,t,n){e.exports=n.p+"static/media/logo.9f69ea93.jpg"},53:function(e,t,n){e.exports=n(74)},58:function(e,t,n){},62:function(e,t,n){},71:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),l=n.n(c),u=(n(58),n(6)),o=n.n(u),s=n(9),i=n(15),m=n(20),p=(n(60),n(29)),f=n(8),E=n(80),d=n(79),v=n(77),h=n(52),b=(n(61),n(23)),g=n.n(b),y=(n(62),n(12)),j=n(13),k=n(16),w=n.n(k),O=function(){function e(){Object(y.a)(this,e)}return Object(j.a)(e,null,[{key:"get",value:function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.ajax({type:"GET",url:"https://03hnoouy54.execute-api.eu-west-2.amazonaws.com/live/get-ec2-status",data:"",beforeSend:function(e){e.setRequestHeader("x-api-key",t)}}).then((function(e){return e}),(function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),S=n(82),x=n(81),C=n(34),N=n(24),R=n(25),T=(n(71),function(e){var t=e.logout;return r.a.createElement(S.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(S.a.Brand,null,r.a.createElement(C.LinkContainer,{to:"/"},r.a.createElement("img",{src:g.a,className:"nav-logo",alt:"logo"}))),r.a.createElement(S.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(S.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(x.a,{className:"mr-auto"},r.a.createElement(C.LinkContainer,{to:"/Server"},r.a.createElement(x.a.Link,null,"Server")),r.a.createElement(C.LinkContainer,{to:"/Settings"},r.a.createElement(x.a.Link,null,"Settings"))),r.a.createElement(x.a,null,r.a.createElement(x.a.Link,{onClick:t},r.a.createElement(N.a,{icon:R.b})," Logout"))))}),I=function(){function e(){Object(y.a)(this,e)}return Object(j.a)(e,null,[{key:"post",value:function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.ajax({type:"POST",url:"https://03hnoouy54.execute-api.eu-west-2.amazonaws.com/live/start-ec2-instance",data:"",beforeSend:function(e){e.setRequestHeader("x-api-key",t)}}).then((function(e){return e}),(function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),L=function(){function e(){Object(y.a)(this,e)}return Object(j.a)(e,null,[{key:"post",value:function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.ajax({type:"POST",url:"https://03hnoouy54.execute-api.eu-west-2.amazonaws.com/live/stop-ec2-instance",data:"",beforeSend:function(e){e.setRequestHeader("x-api-key",t)}}).then((function(e){return e}),(function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),A=function(){function e(){Object(y.a)(this,e)}return Object(j.a)(e,null,[{key:"get",value:function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.ajax({type:"GET",url:"https://03hnoouy54.execute-api.eu-west-2.amazonaws.com/live/get-instance-details",data:"",beforeSend:function(e){e.setRequestHeader("x-api-key",t)}}).then((function(e){return e}),(function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),M=function(){function e(){Object(y.a)(this,e)}return Object(j.a)(e,null,[{key:"displayErrorMessage",value:function(e){m.b.error(e)}},{key:"displaySuccessMessage",value:function(e){m.b.success(e)}},{key:"displayWarning",value:function(e){m.b.warn(e)}},{key:"displayInfo",value:function(e){m.b.info(e)}}]),e}(),D="Pending",P=n(78),H=(n(73),function(e){var t=e.serverStatus,n=e.getServerStatus,c=e.startServer,l=e.stopServer,u=e.serverDetails,m=Object(a.useState)(""),p=Object(i.a)(m,2),f=p[0],E=p[1],d=Object(a.useState)(""),b=Object(i.a)(d,2),g=b[0],y=b[1],j=Object(a.useRef)(null),k=Object(a.useCallback)((function(){var e=new Date(u.launchTime),t=(new Date).getTime()-e.getTime();y(e.toGMTString()),E(new Date(t).toLocaleTimeString())}),[y,E,u]);return Object(a.useEffect)((function(){return"Running"===t?j.current=setInterval(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),1e3):clearInterval(j.current),function(){clearInterval(j.current)}}),[E,t,k]),r.a.createElement(v.a,null,r.a.createElement(h.a,null,r.a.createElement("div",{className:"inner-content"},r.a.createElement("h1",null,r.a.createElement(v.a,null,r.a.createElement(h.a,null,"Jdmcserver: ",t===D&&r.a.createElement(N.a,{icon:R.c,spin:!0}),t!==D&&r.a.createElement(r.a.Fragment,null,t)),r.a.createElement(h.a,null,t!==D&&r.a.createElement(N.a,{className:"refresh-icon",icon:R.a,onClick:n})))),r.a.createElement("div",{className:"server-details-content"},t!==D&&r.a.createElement(v.a,{className:"mt-5"},r.a.createElement(h.a,null,r.a.createElement(P.a,{borderless:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"launch-cell"},r.a.createElement("p",null,"Launch/Stop Server")),r.a.createElement("td",null,r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",checked:"Running"===t,onClick:function(){"Stopped"===t&&c(),"Running"===t&&l()},readOnly:!0}),r.a.createElement("span",{className:"slider round"})))))))),"Running"===t&&r.a.createElement(v.a,null,r.a.createElement(h.a,null,r.a.createElement(P.a,{bordered:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Server Address"),r.a.createElement("td",null,u.publicDnsName)),r.a.createElement("tr",null,r.a.createElement("td",null,"ip"),r.a.createElement("td",null,u.publicIpAddress)),r.a.createElement("tr",null,r.a.createElement("td",null,"Region"),r.a.createElement("td",null,u.availabilityZone)),r.a.createElement("tr",null,r.a.createElement("td",null,"Started"),r.a.createElement("td",null,g)),r.a.createElement("tr",null,r.a.createElement("td",null,"Time Running"),r.a.createElement("td",null,f))))))))))}),z=function(e){var t=e.apiKey,n=Object(a.useState)(D),c=Object(i.a)(n,2),l=c[0],u=c[1],m=Object(a.useState)({}),p=Object(i.a)(m,2),f=p[0],E=p[1],d=function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(D),e.next=3,I.post(t).then((function(){setTimeout((function(){return b()}),15e3)})).catch((function(e){M.displayErrorMessage("Error when starting the server."),console.error(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(D),e.next=3,L.post(t).then((function(){setTimeout((function(){return b()}),15e3)})).catch((function(e){M.displayErrorMessage("Error when stopping the server."),console.error(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=Object(a.useCallback)(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get(t).then((function(e){E(e)})).catch((function(e){M.displayErrorMessage("Couldn't get server details."),console.error(e)}));case 2:case"end":return e.stop()}}),e)}))),[t,E]),b=Object(a.useCallback)(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(D),e.next=3,O.get(t).then((function(e){"Running"===e.status&&(u("Running"),h()),"Stopped"===e.status&&u("Stopped"),e.status===D&&(u(D),b())})).catch((function(e){M.displayErrorMessage("Couldn't check server status."),u("Error"),console.error(e)}));case 3:case"end":return e.stop()}}),e)}))),[t,u,h]);return Object(a.useEffect)((function(){b()}),[b]),r.a.createElement(H,{serverStatus:l,getServerStatus:b,startServer:d,stopServer:v,serverDetails:f})},G=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(!1),u=Object(i.a)(l,2),b=u[0],y=u[1],j=Object(a.useCallback)(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get(n).then((function(){y(!0)})).catch((function(){m.b.error("API Key Invalid.",{autoClose:2500,hideProgressBar:!0})}));case 2:case"end":return e.stop()}}),e)}))),[n,y]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null),!b&&r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:g.a,className:"",alt:"logo"}),r.a.createElement("p",null,"Jdmcserver"),r.a.createElement(E.a,{className:"w-25 mt-3 text-center"},r.a.createElement(E.a.Group,null,r.a.createElement(E.a.Label,null,"Enter an API Key"),r.a.createElement(E.a.Control,{type:"password",placeholder:"API-Key",onChange:function(e){return c(e.target.value)}})),r.a.createElement(d.a,{variant:"outline-primary",type:"submit",onClick:function(e){return function(e){e.preventDefault(),j()}(e)}},"Submit")))),b&&r.a.createElement(p.HashRouter,{basename:"/jdmcserver-frontend/"},r.a.createElement(v.a,null,r.a.createElement(h.a,null,r.a.createElement(T,{logout:function(){c(""),y(!1)}}))),r.a.createElement(v.a,null,r.a.createElement(h.a,null,r.a.createElement(f.g,null,r.a.createElement(f.d,{path:"//"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:g.a,className:"App-logo",alt:"logo"}),r.a.createElement("p",null,"Jdmcserver"),r.a.createElement("a",{className:"App-link",href:"https://github.com/werzl/jdmcserver",target:"_blank",rel:"noopener noreferrer"},"GitHub"))),r.a.createElement(f.d,{path:"/Server/"},r.a.createElement(z,{apiKey:n})),r.a.createElement(f.d,{path:"/Settings/"},r.a.createElement(v.a,null,r.a.createElement(h.a,null,r.a.createElement("div",{className:"inner-content"},r.a.createElement("h1",null,"Settings"))))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.7243a3ad.chunk.js.map